<!doctype html>

<!-- Place content in this div, so we dont introduce margin straight into body -->
<nav class='navbar navbar-expand-lg navbar-light w-100' style='background-color: var(--background-color)'>
  <div class='container-fluid'>

    <a class='navbar-brand' href='/'>
      <img src='/static/assets/icons/logo_black.png' alt='logo' width='50px' height='50px'>
    </a>


    <button class='navbar-toggler' type='button' data-bs-toggle='collapse' data-bs-target='#navbarSupportedContent' aria-controls='navbarSupportedContent' aria-expanded='false' aria-label='Toggle navigation'>
      <span class='navbar-toggler-icon'></span>
    </button>


    <div class='collapse navbar-collapse' id='navbarSupportedContent'>

      <ul class='navbar-nav me-auto mb-2 mb-lg-0'>
        <li class='nav-item'>
          <a class='nav-link active' aria-current='page' href='/store'>Store</a>
        </li>

        {% if not g.user %}
          <li class='nav-item'>
            <a class='nav-link' href='/privacy-policy'>Policy</a>
          </li>
        {% endif %}

        {% if g.user %}
          <li class='nav-item'>
            <a class='nav-link' href='/profile'>Profile</a>
          </li>
        {% endif %}
        
        <li class='nav-item'>
          <a class='nav-link' href='/contact-us' tabindex='-1' aria-disabled='true'>Contact Us</a>
        </li>
      </ul>


      <form class='d-flex'>
        <ul class='navbar-nav me-auto mb-2 mb-lg-0 gap-3 px-3'>

          {# Not Logged in #}
          {% if not g.user %}
            <li class='nav-item'>
              <a id="login-navlink" class='nav-link active text-decoration-underline' tabindex='-1' aria-disabled='true'>Login</a>
            </li>

            <li class='nav-item w-2'>
              <a id="register-navlink" class='nav-link active register btn btn-outline-dark text-white px-3' tabindex='-1' aria-disabled='true'>Register</a>
            </li>
          {% endif %}


          {# Logged in #}
          {% if g.user %}
            <li class='nav-item'>
              <a id='logout-navlink' class='nav-link active text-decoration-underline' tabindex='-1' aria-disabled='true' href='/logout'>Logout</a>
            </li>

            <li class='nav-item w-2'>
              <a id='cart-navlink' class='nav-link active register btn btn-outline-dark text-white px-3' tabindex='-1' aria-disabled='true' href='/cart'>Cart</a>
            </li>

            {% if g.user.privilege == 'Admin' %}
              <li class='nav-item w-2'>
                <a class='nav-link active register btn btn-outline-dark text-white px-3' tabindex='-1' aria-disabled='true' href='/dashboard'>Dashboard</a>
              </li>
            {% endif %}
          {% endif %}
        </ul>
      </form>

    </div>


  </div>
</nav>

{% if not g.user %}
  <script>
    $(() => {
      $("#login-navlink").attr('href', window.location.pathname === '/' ? '/login' : `/login?callbackURI=${encodeURI(window.location.pathname)}`);
      $("#register-navlink").attr('href', window.location.pathname === '/' ? '/register' : `/register?callbackURI=${encodeURI(window.location.pathname)}`);
    });
  </script>
{% endif %}

